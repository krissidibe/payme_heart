<!DOCTYPE html>
<html lang="en">
  <head>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <style>
    :root * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    @import url("https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&family=Inter:wght@400;600&display=swap");

    body {
      font-family: 'Poppins', sans-serif;;
    }
    .inter {
      font-family: 'Inter', sans-serif;
    }
    .poppin {
      font-family: 'Poppins', sans-serif;;
    }
    .page-header,
    .page-header-space {
      height: 100px;
    }

    .page-footer,
    .page-footer-space {
      height: 80px;
    }

    .page-footer {
      position: fixed;
      bottom: 80px;

      width: 100%;
      /* for demo */
      /* for demo */
    }

    .page-header {
      position: fixed;
      top: 0mm;
      width: 100%;
      border-bottom: 1px solid black; /* for demo */
      background: yellow; /* for demo */
    }

    .page {
      page-break-after: always;
      padding-bottom: 0px;
    }

    @page {
      margin: 0mm;
    }

    @media print {
      thead {
        display: table-header-group;
      }
      tfoot {
        display: table-footer-group;
      }

      button {
        display: none;
      }

      body {
        margin: 0;
      }
    }
    /* Facture Custom styling */
    @font-face {
      font-family: "Helvetica Neue";
      src: url("path-to-your-fonts/HelveticaNeue-Bold.woff2") format("woff2"),
        url("path-to-your-fonts/HelveticaNeue-Bold.woff") format("woff");
      font-weight: bold;
      font-style: normal;
    }

    .heading {
      flex-direction: column;
      justify-content: space-between;
    }
    .heading img {
      color: #383838;
      object-position: right;

      padding-right: 10px !important;
      max-width: 300px !important;
    }

    .heading > div {
      align-items: center !important;
      position: relative;
      padding-bottom: 4px !important;
    }

    .heading > div > p {
      color: #383838;
      flex: 1;

      height: 100% !important;
      border-right: 6px solid black;
    }
    .pages .facture-number {
      width: auto !important;

      justify-self: flex-start;
      padding-right: 0 !important;
      display: none !important;
    }
    .pages .facture-number > div p {
    }

    .pages .facture-number > div {
    }

    .facture-number > div p:first-child {
      color: #010101;
    }
    .facture-number .dividor {
      display: block !important;
      flex: 1;
      border-top: 1px solid var(--primary-text-color, white) !important;
      margin-left: 11px;
      margin-right: 3px;
    }
    .facture-number .dividor2 {
      display: block !important;
      flex: 1;
      border-top: 1px solid var(--primary-text-color, white) !important;
      margin-left: 11px;
      margin-right: 3px;
    }

    .heading .logo {
      font-family: "Helvetica Neue", sans-serif;
      background: var(--primary-color, #383838);
      color: var(--primary-text-color, white);
    }

    .headline {
      margin-top: 40.5px !important;
      padding-top: 0px;
      justify-content: space-between;

      display: flex;
    }

    .headline p {
      font-weight: 400;
    }

    .tabs {
      margin-top: 0px !important;
      margin-bottom: 10px !important;
    }

    .tabs-item {
      color: #4d4b4c;
    }

    .tabs > .tabs-item:nth-child(even) {
      background: #ebebeb;

      margin: 0px 56px !important;
      padding: 0px !important;
    }
    .tabs .tabs-header {
      margin-top: 0px !important;
    }

    .border-bottom-secondary {
      border-bottom: 8px solid var(--secondary-color, #00525f) !important;
    }
    .tabs .tabs-header p {
      padding-top: 10px !important;
    }

    .tabs-item p {
      padding-top: 0px !important;
    }

    .tabs-item :last-child {
      justify-content: flex-end !important;
      align-items: start;
    }

    .total {
      padding: 30px 40px !important;
      margin: 0px 56px !important;

      background: #ebebeb;
    }
    .total-separator {
      display: none !important;
      opacity: 0.2;
    }

    .total .total-amount {
      background: var(--secondary-color, #00525f);
      color: var(--secondary-text-color, white);
    }

    .signature {
      margin-top: 0px !important;
      margin: 0px 56px !important;
      padding: 0px 30px !important;
      padding-top: 0px !important;
      padding-bottom: 60px !important;
      background: #ebebeb;
      padding-left: 60px !important;
    }

    .sign {
      font-weight: 700;
    }

    .separator {
      background: black;
      height: 1px;
      margin: 20px 56px !important;
      padding: 0px !important;
      margin-top: 0px !important;
    }
    .footer {
     
      z-index: 1;

      padding-top: 0 !important;
      
      color: black;
    }
    

    .bg-primary {
      background: var(--primary-color, #51aa8e) !important;
      color: var(--primary-text-color, white);
    }
    .bg-secondary {
      background: var(--secondart-color, #338980);
      color: var(--secondart-text-color, white);
    }
     

    .borderlinear {
      height: 3px;
      background: linear-gradient(
        90deg,
        color-mix(in srgb, var(--primary-color, #338980) 100%, transparent) 51%,
        color-mix(in srgb, var(--secondary-color, #00526a) 100%, transparent)
          51.1%,
        color-mix(in srgb, var(--secondary-color, #00526a) 100%, transparent)
      ) !important;
    }

    .borderlinear2 {
      background: linear-gradient(
        90deg,
        color-mix(in srgb, var(--primary-color, #338980) 100%, transparent) 51%,
        color-mix(in srgb, var(--secondary-color, #00526a) 100%, transparent)
          51.1%,
        color-mix(in srgb, var(--secondary-color, #00526a) 100%, transparent)
      ) !important;
    }

    /* End Facture Custom styling */
  </style>

  <body>
    <!-- footer -->

    <div
      class="bottom-0 items-center justify-center pt-2 footer page-footer "
    >
      <p class="text-[11px] px-[57px] pt-2 text-center line-clamp-4">
        <%= dataEnterpriseInfo %> 
      </p>
      <div class="mr-[190px] mt-2 h-[4px] borderlinear2"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td class="pages w-[827px]">
            <div class="flex flex-col w-full page-content">
              <!-- logo + facture -->
              <div>
                <header
                  class="heading flex items-center flex-row mt-[28px] pr-[56px]"
                >
                  <div class="w-full h-[1px] borderlinear2"></div>
                  <img
                    class="max-h-[120px] object-left object-contain h-[120px] max-w-[400px] w-[400px] ml-4"
                    src="<%=logo%>"
                    alt=""
                    srcset=""
                  />
                </header>
              </div>

              <div class="flex px-[56px] items-start py-10 pt-5">
                <div
                  class="facture-number-new h-[85px] scale-[140%] ml-8 font-semibold text-[23px] inter mr-4 pr-[18px]"
                >
                  <div class="mb-1 font-light leading-6 min-w-[110px]">
                    <% if(invoiceType == 0) { %>
                    <p>PROFORMA</p>
                    <% } %> <% if(invoiceType == 1) { %>
                    <p>FACTURE</p>
                    <% } %> <% if(invoiceType == 2) { %>
                    <p>BORDEREAU</p>
                    <% } %>
                    <p>
                      N°:
                      <span
                        ><%=project.invoiceNumber.toString().padStart(5,
                        '0')%></span
                      >
                    </p>
                  </div>
                  <div class="borderlinear h-[0.11px] mt-2"></div>
                  <% if(invoiceType == 0) { %>

                  <p class="pt-2 font-light text-[14px] flex justify-between">
                    Date: <%=date%>
                  </p>
                  <% } %> <% if(invoiceType == 1) { %>

                  <p class="pt-2 font-light text-[14px] flex justify-between">
                    Date: <%=date%>
                  </p>
                  <% } %> <% if(invoiceType == 2) { %>

                  <p class="pt-2 font-light text-[14px] flex justify-between">
                    Date: <%=date%>
                  </p>
                  <% } %>
                </div>
                <!-- Info projet -->
                <div
                  class="border-l ml-8 border-black inter leading-5 font-light pl-4 text-[16.4px] px-12"
                >
                  <div>
                    <p class="text-[15px]" >Objet: <%= project.name %></p>
                    <p class="text-[15px]" >Client: <%= customer.name %></p>
                    <p class="text-[15px]" >Adresse: <%= customer.address %></p>
                  </div>

                  <div
                    class="facture-number h-[80px] flex flex-col leading-tight text-[15px] inter"
                  >
                    <div class="flex leading-6">
                      <% if(invoiceType == 0) { %>
                      <p>PROFORMA</p>
                      <% } %> <% if(invoiceType == 1) { %>
                      <p>FACTURE</p>
                      <% } %> <% if(invoiceType == 2) { %>
                      <p>BORDEREAU</p>
                      <% } %>

                      <p>
                        <span class="ml-1">N°</span> :
                        <span
                          ><%=project.invoiceNumber.toString().padStart(5,
                          '0')%></span
                        >
                      </p>
                    </div>
                    <div class="flex items-center">
                      <p>DATE: <span><%=date%></span></p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- headline (object, address, client) -->

              <!-- table -->
              <main class="tabs flex flex-col mt-[31.43px] font-light">
                <!-- table heading -->
                <div
                  class="tabs-header mb-2 tabs-item inter flex w-full text-[14.8px] px-14 py-[0px]"
                >
                  <% if(invoiceType !== 2) { %>
                  <p
                    class="flex-1 py-[8.34px] rounded-tl-[20px]  bg-primary border-bottom-secondary px-[15.29px]"
                  >
                    DESCRIPTION
                  </p>

                  <p
                    class="w-[115px] py-[8.34px] text-center bg-primary border-bottom-secondary"
                  >
                    QTé.
                  </p>
                  <p
                    class="w-[115px] py-[8.34px] text-center bg-primary border-bottom-secondary"
                  >
                    <%= invoiceType === 2 ? "Observation": " Prix.U" %>
                  </p>

                  <p
                    class="w-[115px] py-[8.34px] text-center bg-primary border-bottom-secondary rounded-tr-[20px]"
                  >
                    <%= invoiceType === 2 ? "": "Montant" %>
                  </p>

                  <% } %> <% if(invoiceType === 2) { %>
                  <p
                    class="min-w-[335px]  rounded-tl-[20px]  w-[335px] flex-1 py-[8.34px] bg-primary border-bottom-secondary px-[15.29px]"
                  >
                    DESCRIPTION
                  </p>
                  <p
                    class="w-[115px] py-[8.34px] bg-primary border-bottom-secondary text-center"
                  >
                    QTé.
                  </p>
                  <p
                    class="flex-1 py-[8.34px] mr-0 max-w-auto rounded-tr-[20px] border-bottom-secondary bg-primary text-center"
                  >
                    <%= invoiceType === 2 ? "Observation": " Prix.U" %>
                  </p>

                  <% } %>
                </div>

                <% table.forEach(function(item,index) { %>

                <div class="px-14 tabs-item">
                  <!-- table item -->
                  <div
                    class="text-[12px] flex w-full items-center min-h-[50px] py-[14px]"
                  >
                    <p class="flex-1 pl-4"><%=item.designation%></p>

                    <p class="w-[115px] py-[8.34px] text-center">
                      <%=item.quantity%>
                    </p>

                    <p class="w-[115px] py-[8.34px] text-center">
                      <% if(item.rate != 0 && item.rate != null) { %> <%=
                      invoiceType === 2 ? "": item.rate %>

                      <span class="ml-1">
                        <%= invoiceType === 2 ? "": currency %></span
                      >

                      <% } %>
                    </p>
                    <p class="w-[115px] py-[8.34px] text-center">
                      <% if(item.amount != 0 && item.amount != null) { %> <%=
                      invoiceType === 2 ? "": item.amount %>

                      <span class="ml-1">
                        <%= invoiceType === 2 ? "": currency %></span
                      >

                      <% } %>
                    </p>
                  </div>
                </div>
                <% }) %>
              </main>

              <div class="separator"></div>
              <!-- facture totals informations -->
              <%- include('../subtemplates/total1') %>

              <!-- signature -->
              <%- include('../subtemplates/sign1') %>

              <!-- footer -->
            </div>
          </td>
        </tr>
      </tbody>

      <tfoot>
        <tr>
          <td>
            <!--place holder for the fixed-position footer-->
            <div class="page-footer-space"></div>
          </td>
        </tr>
      </tfoot>
    </table>
  </body>
</html>
